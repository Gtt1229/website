(window.webpackJsonp=window.webpackJsonp||[]).push([[205],{577:function(t,e,a){"use strict";a.r(e);var r=a(42),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"server-hpp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-hpp"}},[t._v("#")]),t._v(" Server.hpp"),a("seo")],1),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/oatpp/oatpp/blob/master/src/oatpp/network/Server.hpp",target:"_blank",rel:"noopener noreferrer"}},[t._v("This File On Github"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://github.com/oatpp/oatpp/issues/new?title=API%20question&body=In%20file:%20oatpp/network/Server.hpp%0A%0A%23%20Question%0A%0A%3Cyour-question-here%3E",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ask A Question"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("code",[t._v("API: latest")]),a("br"),t._v(" "),a("code",[t._v("module: oatpp")]),a("br"),t._v(" "),a("code",[t._v('#include "oatpp/network/Server.hpp"')])]),t._v(" "),a("h2",{attrs:{id:"server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server"}},[t._v("#")]),t._v(" Server")]),t._v(" "),a("p",[t._v("Server calls oatpp::network::ConnectionProvider::get in the loop and passes obtained Connection to "),a("RouterLink",{attrs:{to:"/api/latest/oatpp/network/ConnectionHandler/#connectionhandler"}},[t._v("oatpp::network::ConnectionHandler")]),t._v(".")],1),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" oatpp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" network "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Server")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" base"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("Countable "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"fields"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fields"}},[t._v("#")]),t._v(" Fields")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Summary")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("const v_int32")])]),t._v(" "),a("td",[a("a",{attrs:{href:"#server-status-created"}},[t._v("STATUS_CREATED")])]),t._v(" "),a("td",[t._v("Status constant.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("const v_int32")])]),t._v(" "),a("td",[a("a",{attrs:{href:"#server-status-starting"}},[t._v("STATUS_STARTING")])]),t._v(" "),a("td",[t._v("Status constant.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("const v_int32")])]),t._v(" "),a("td",[a("a",{attrs:{href:"#server-status-running"}},[t._v("STATUS_RUNNING")])]),t._v(" "),a("td",[t._v("Status constant.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("const v_int32")])]),t._v(" "),a("td",[a("a",{attrs:{href:"#server-status-stopping"}},[t._v("STATUS_STOPPING")])]),t._v(" "),a("td",[t._v("Status constant.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("const v_int32")])]),t._v(" "),a("td",[a("a",{attrs:{href:"#server-status-done"}},[t._v("STATUS_DONE")])]),t._v(" "),a("td",[t._v("Status constant.")])])])]),t._v(" "),a("h3",{attrs:{id:"methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#methods"}},[t._v("#")]),t._v(" Methods")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Return Type")]),t._v(" "),a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Summary")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("[none]")])]),t._v(" "),a("td",[a("a",{attrs:{href:"#server-server"}},[t._v("Server")])]),t._v(" "),a("td",[t._v("Constructor.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("std::shared_ptr<Server>")])]),t._v(" "),a("td",[a("a",{attrs:{href:"#server-createshared"}},[t._v("createShared")])]),t._v(" "),a("td",[t._v("Create shared Server.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("void")])]),t._v(" "),a("td",[a("a",{attrs:{href:"#server-run"}},[t._v("run")])]),t._v(" "),a("td",[t._v("Multiple implementations: "),a("br"),a("ol",[a("li",[t._v("Call oatpp::network::ConnectionProvider::getConnection in the loop and passes obtained Connection ")]),a("li",[t._v("Call oatpp::network::ConnectionProvider::getConnection in the loop and passes obtained Connection ")])])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("void")])]),t._v(" "),a("td",[a("a",{attrs:{href:"#server-stop"}},[t._v("stop")])]),t._v(" "),a("td",[t._v("Break server loop.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("v_int32")])]),t._v(" "),a("td",[a("a",{attrs:{href:"#server-getstatus"}},[t._v("getStatus")])]),t._v(" "),a("td",[t._v("Get server status.")])])])]),t._v(" "),a("h3",{attrs:{id:"server-status-created"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-status-created"}},[t._v("#")]),t._v(" Server::STATUS_CREATED")]),t._v(" "),a("p",[t._v("Status constant.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" v_int32 STATUS_CREATED\n")])])]),a("h3",{attrs:{id:"server-status-starting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-status-starting"}},[t._v("#")]),t._v(" Server::STATUS_STARTING")]),t._v(" "),a("p",[t._v("Status constant.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" v_int32 STATUS_STARTING\n")])])]),a("h3",{attrs:{id:"server-status-running"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-status-running"}},[t._v("#")]),t._v(" Server::STATUS_RUNNING")]),t._v(" "),a("p",[t._v("Status constant.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" v_int32 STATUS_RUNNING\n")])])]),a("h3",{attrs:{id:"server-status-stopping"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-status-stopping"}},[t._v("#")]),t._v(" Server::STATUS_STOPPING")]),t._v(" "),a("p",[t._v("Status constant.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" v_int32 STATUS_STOPPING\n")])])]),a("h3",{attrs:{id:"server-status-done"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-status-done"}},[t._v("#")]),t._v(" Server::STATUS_DONE")]),t._v(" "),a("p",[t._v("Status constant.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" v_int32 STATUS_DONE\n")])])]),a("h3",{attrs:{id:"server-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-server"}},[t._v("#")]),t._v(" Server::Server")]),t._v(" "),a("p",[t._v("Constructor. "),a("ul",[a("li",[a("strong",[t._v("@param")]),t._v(" connectionProvider - "),a("RouterLink",{attrs:{to:"/api/latest/oatpp/network/ConnectionProvider/#connectionprovider"}},[t._v("oatpp::network::ConnectionProvider")]),t._v(". ")],1),a("li",[a("strong",[t._v("@param")]),t._v(" connectionHandler - "),a("RouterLink",{attrs:{to:"/api/latest/oatpp/network/ConnectionHandler/#connectionhandler"}},[t._v("oatpp::network::ConnectionHandler")]),t._v(". ")],1)])]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" std"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("shared_ptr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ConnectionProvider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" connectionProvider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" std"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("shared_ptr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ConnectionHandler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" connectionHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"server-createshared"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-createshared"}},[t._v("#")]),t._v(" Server::createShared")]),t._v(" "),a("p",[t._v("Create shared Server. "),a("ul",[a("li",[a("strong",[t._v("@param")]),t._v(" connectionProvider - "),a("RouterLink",{attrs:{to:"/api/latest/oatpp/network/ConnectionProvider/#connectionprovider"}},[t._v("oatpp::network::ConnectionProvider")]),t._v(". ")],1),a("li",[a("strong",[t._v("@param")]),t._v(" connectionHandler - "),a("RouterLink",{attrs:{to:"/api/latest/oatpp/network/ConnectionHandler/#connectionhandler"}},[t._v("oatpp::network::ConnectionHandler")]),t._v(". ")],1),a("li",[a("strong",[t._v("@return")]),t._v(" - "),a("code",[t._v("std::shared_ptr")]),t._v(" to Server. ")])])]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" std"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("shared_ptr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createShared")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" std"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("shared_ptr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ServerConnectionProvider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" connectionProvider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" std"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("shared_ptr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ConnectionHandler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" connectionHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"server-run"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-run"}},[t._v("#")]),t._v(" Server::run")]),t._v(" "),a("ol",[a("li",[t._v("Call oatpp::network::ConnectionProvider::getConnection in the loop and passes obtained Connection to "),a("RouterLink",{attrs:{to:"/api/latest/oatpp/network/ConnectionHandler/#connectionhandler"}},[t._v("oatpp::network::ConnectionHandler")]),t._v(". "),a("ul",[a("li",[a("strong",[t._v("@param")]),t._v(" conditional - Function that is called every mainloop iteration to check if the server should continue to run "),a("br"),t._v(" Return true to let the server continue, false to shut it down. ")])]),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("std"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("function"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" conditional "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("nullptr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])],1),t._v(" "),a("li",[t._v("Call oatpp::network::ConnectionProvider::getConnection in the loop and passes obtained Connection to "),a("RouterLink",{attrs:{to:"/api/latest/oatpp/network/ConnectionHandler/#connectionhandler"}},[t._v("oatpp::network::ConnectionHandler")]),t._v(". "),a("ul",[a("li",[a("strong",[t._v("@param")]),t._v(" startAsNewThread - Start the server blocking (thread of callee) or non-blocking (own thread) deprecated Deprecated since 1.3.0, will be removed in the next release. The new repository https://github.com/oatpp/oatpp-threaded-starter shows many configurations how to run Oat++ in its own thread. From simple No-Stop to Stop-Simple and ending in Oat++ completely isolated in its own thread-scope. We recommend the Stop-Simple for most applications! You can find it here: https://github.com/oatpp/oatpp-threaded-starter/blob/master/src/App_StopSimple.cpp The other examples are non trivial and highly specialized on specific environments or requirements. Please read the comments carefully and think about the consequences twice. If someone wants to use them please get back to us in an issue in the new repository and we can assist you with them. Again: These examples introduce special conditions and requirements for your code! ")])]),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),t._v(" startAsNewThread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])],1)]),t._v(" "),a("h3",{attrs:{id:"server-stop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-stop"}},[t._v("#")]),t._v(" Server::stop")]),t._v(" "),a("p",[t._v("Break server loop. Note: thread can still be blocked on the "),a("a",{attrs:{href:"#server-run"}},[t._v("Server::run()")]),t._v(" call as it may be waiting for ConnectionProvider to provide connection.")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"server-getstatus"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-getstatus"}},[t._v("#")]),t._v(" Server::getStatus")]),t._v(" "),a("p",[t._v("Get server status. "),a("ul",[a("li",[a("strong",[t._v("@return")]),t._v(" - one of:"),a("br"),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#server-status-created"}},[t._v("Server::STATUS_CREATED")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#server-status-running"}},[t._v("Server::STATUS_RUNNING")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#server-status-stopping"}},[t._v("Server::STATUS_STOPPING")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#server-status-done"}},[t._v("Server::STATUS_DONE")])])])])])]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("v_int32 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);